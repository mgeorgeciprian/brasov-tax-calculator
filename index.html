<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator Impozite Locale BraÈ™ov 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
        }
        .tab-active {
            background: #2563eb;
            color: white;
        }
        .tab-inactive {
            background: #f3f4f6;
            color: #4b5563;
        }
        .tab-inactive:hover {
            background: #e5e7eb;
        }
        select, input[type="number"] {
            appearance: none;
            -webkit-appearance: none;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen p-4 md:p-8">
    <div class="max-w-4xl mx-auto" id="app">
        <!-- Header -->
        <div class="bg-white rounded-2xl shadow-xl p-6 mb-6">
            <div class="flex items-center gap-4 mb-2">
                <div class="w-16 h-16 bg-blue-600 rounded-xl flex items-center justify-center">
                    <span class="text-3xl">ğŸ›ï¸</span>
                </div>
                <div>
                    <h1 class="text-2xl md:text-3xl font-bold text-gray-800">
                        Calculator Impozite Locale BraÈ™ov
                    </h1>
                    <p class="text-gray-500">
                        Conform HCL nr. 1142/22.12.2025 pentru anul fiscal 2026
                    </p>
                </div>
            </div>
        </div>

        <!-- Early Payment Toggle -->
        <div class="bg-white rounded-xl shadow-lg p-4 mb-6">
            <label class="flex items-center gap-3 cursor-pointer">
                <input type="checkbox" id="earlyPayment" class="w-5 h-5 text-green-600 rounded focus:ring-green-500">
                <span class="text-gray-700 font-medium">
                    ğŸ PlatÄƒ anticipatÄƒ pÃ¢nÄƒ la 31 martie 2026 (bonificaÈ›ie 10% - Art. 27)
                </span>
                <span id="discountBadge" class="hidden bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm font-medium">
                    -10% aplicat
                </span>
            </label>
        </div>

        <!-- Tabs -->
        <div class="flex gap-2 mb-0 flex-wrap">
            <button onclick="showTab('cladiri')" id="tab-cladiri" class="tab-active flex items-center gap-2 px-6 py-3 font-medium rounded-t-lg transition-all">
                <span>ğŸ </span> ClÄƒdiri
            </button>
            <button onclick="showTab('auto')" id="tab-auto" class="tab-inactive flex items-center gap-2 px-6 py-3 font-medium rounded-t-lg transition-all">
                <span>ğŸš—</span> Auto
            </button>
            <button onclick="showTab('teren')" id="tab-teren" class="tab-inactive flex items-center gap-2 px-6 py-3 font-medium rounded-t-lg transition-all">
                <span>ğŸŒ</span> Teren
            </button>
        </div>

        <!-- Tab Content -->
        <div class="bg-white rounded-b-2xl rounded-tr-2xl shadow-xl p-6">
            
            <!-- CLÄ‚DIRI TAB -->
            <div id="content-cladiri" class="space-y-6">
                <h2 class="text-xl font-bold text-gray-800 flex items-center gap-2">
                    ğŸ  Impozit pe ClÄƒdiri
                </h2>
                
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Tip proprietar</label>
                        <select id="buildingOwnerType" onchange="calculateBuilding()" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            <option value="fizica">PersoanÄƒ fizicÄƒ</option>
                            <option value="juridica">PersoanÄƒ juridicÄƒ</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Tip clÄƒdire</label>
                        <select id="buildingType" onchange="calculateBuilding()" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            <option value="residential">RezidenÈ›ialÄƒ (locuinÈ›Äƒ)</option>
                            <option value="nonResidential">NerezidenÈ›ialÄƒ</option>
                        </select>
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Material construcÈ›ie</label>
                        <select id="buildingMaterial" onchange="calculateBuilding()" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            <option value="beton">Beton armat / CÄƒrÄƒmidÄƒ arsÄƒ</option>
                            <option value="piatra">PiatrÄƒ / CÄƒrÄƒmidÄƒ nearsÄƒ</option>
                            <option value="lemn">Lemn / Alte materiale</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">SuprafaÈ›a construitÄƒ (mÂ²)</label>
                        <input type="number" id="buildingArea" oninput="calculateBuilding()" placeholder="Ex: 67" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                    </div>
                </div>

                <label class="flex items-center gap-3 cursor-pointer">
                    <input type="checkbox" id="hasUtilities" checked onchange="calculateBuilding()" class="w-5 h-5 text-blue-600 rounded">
                    <span class="text-gray-700">Cu utilitÄƒÈ›i (apÄƒ, canal, electricitate, Ã®ncÄƒlzire)</span>
                </label>

                <!-- Info Box -->
                <div class="bg-blue-50 rounded-lg p-4 text-sm">
                    <p class="font-semibold text-blue-800 mb-2">ğŸ“‹ Valori impozabile È™i cote (Anexa 1, Art. 2-3):</p>
                    <table class="w-full text-blue-700 text-xs">
                        <thead>
                            <tr class="border-b border-blue-200">
                                <th class="text-left py-1">Material</th>
                                <th class="text-right py-1">Cu utilitÄƒÈ›i</th>
                                <th class="text-right py-1">FÄƒrÄƒ utilitÄƒÈ›i</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>Beton/CÄƒrÄƒmidÄƒ arsÄƒ</td><td class="text-right">2.677 lei/mp</td><td class="text-right">1.606 lei/mp</td></tr>
                            <tr><td>PiatrÄƒ/CÄƒrÄƒmidÄƒ nearsÄƒ</td><td class="text-right">803 lei/mp</td><td class="text-right">535 lei/mp</td></tr>
                            <tr><td>Lemn/Alte materiale</td><td class="text-right">335 lei/mp</td><td class="text-right">201 lei/mp</td></tr>
                        </tbody>
                    </table>
                    <p class="mt-2 text-blue-600">
                        CotÄƒ PF rezidenÈ›ial: <strong>0,1%</strong> | PJ rezidenÈ›ial: <strong>0,2%</strong> | PJ nerezidenÈ›ial: <strong>1,3%</strong>
                    </p>
                </div>

                <!-- Result -->
                <div class="bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl p-6 text-white">
                    <div class="grid md:grid-cols-2 gap-4 mb-4 text-blue-100 text-sm">
                        <div>
                            <p>Valoare impozabilÄƒ:</p>
                            <p id="buildingBaseValue" class="text-white font-semibold">0,00 RON</p>
                        </div>
                        <div>
                            <p>CotÄƒ impozitare:</p>
                            <p id="buildingRate" class="text-white font-semibold">0,1%</p>
                        </div>
                    </div>
                    <div class="border-t border-blue-400 pt-4">
                        <p class="text-blue-100 mb-1">Impozit anual clÄƒdire:</p>
                        <p id="buildingTax" class="text-4xl font-bold">0,00 RON</p>
                        <p id="buildingDiscount" class="hidden text-blue-200 text-sm mt-2">âœ“ Include reducerea de 10% pentru platÄƒ anticipatÄƒ</p>
                    </div>
                </div>
            </div>

            <!-- AUTO TAB -->
            <div id="content-auto" class="hidden space-y-6">
                <h2 class="text-xl font-bold text-gray-800 flex items-center gap-2">
                    ğŸš— Impozit pe Mijloace de Transport
                </h2>

                <div id="pollutionWarning" class="bg-red-50 border border-red-200 rounded-lg p-4 text-sm text-red-800">
                    <p class="font-bold">âš ï¸ Important - Cote adiÈ›ionale BraÈ™ov (Art. 7)</p>
                    <p class="mt-1">PrimÄƒria BraÈ™ov aplicÄƒ cote adiÈ›ionale <strong>ATÃ‚T pentru persoane fizice CÃ‚T È™i pentru persoane juridice</strong>, Ã®n funcÈ›ie de norma de poluare!</p>
                </div>

                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Tip proprietar</label>
                        <select id="vehicleOwnerType" onchange="calculateVehicle()" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            <option value="fizica">PersoanÄƒ fizicÄƒ</option>
                            <option value="juridica">PersoanÄƒ juridicÄƒ</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Tip vehicul</label>
                        <select id="vehicleType" onchange="onVehicleTypeChange()" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            <optgroup label="Vehicule cu motor">
                                <option value="autoturism">Autoturism</option>
                                <option value="motocicleta">MotocicletÄƒ / ATV / Triciclu</option>
                                <option value="autoutilitara">AutoutilitarÄƒ / CamionetÄƒ (&lt;12t)</option>
                                <option value="microbuz">Microbuz / Autobuz</option>
                            </optgroup>
                            <optgroup label="Autorulote È™i vehicule speciale">
                                <option value="autorulota_m1">ğŸš AutorulotÄƒ (omologatÄƒ M1)</option>
                                <option value="vehicul_special">ğŸš› Autovehicul special (&lt;12t)</option>
                                <option value="rulota_tractata">ğŸ•ï¸ RulotÄƒ tractatÄƒ (fÄƒrÄƒ motor)</option>
                            </optgroup>
                        </select>
                    </div>
                </div>

                <!-- Engine capacity section (for motorized vehicles) -->
                <div id="engineSection" class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Capacitate cilindricÄƒ (cmÂ³)</label>
                        <input type="number" id="engineCapacity" oninput="calculateVehicle()" placeholder="Ex: 2300" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">NormÄƒ de poluare</label>
                        <select id="pollutionNorm" onchange="calculateVehicle()" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            <option value="noneuro">Non-euro / Euro 0-3 (+100%)</option>
                            <option value="euro4">Euro 4 (+100%)</option>
                            <option value="euro5" selected>Euro 5 (+75%)</option>
                            <option value="euro6">Euro 6 (+35%)</option>
                            <option value="hybrid">Hibrid (+5%)</option>
                        </select>
                    </div>
                </div>

                <!-- Trailer mass section (for trailers) -->
                <div id="trailerSection" class="hidden">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Masa totalÄƒ maximÄƒ autorizatÄƒ</label>
                    <select id="trailerMass" onchange="calculateVehicle()" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        <option value="sub1t">pÃ¢nÄƒ la 1 tonÄƒ (14,16 lei)</option>
                        <option value="1t_5t">1 - 5 tone (53,51 lei)</option>
                        <option value="5t_10t">5 - 10 tone (81,83 lei)</option>
                        <option value="peste10t">peste 10 tone (100,73 lei)</option>
                    </select>
                    <div class="mt-3 bg-green-50 border border-green-200 rounded-lg p-3 text-sm text-green-800">
                        <p class="font-medium">âœ“ Rulotele tractate au impozit fix pe masÄƒ</p>
                        <p class="text-green-600 mt-1">Nu se aplicÄƒ cote adiÈ›ionale de poluare (Art. 470 alin. 7)</p>
                    </div>
                </div>

                <!-- Info boxes for special vehicles -->
                <div id="autorulotaInfo" class="hidden bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm text-blue-800">
                    <p class="font-bold">ğŸš AutorulotÄƒ omologatÄƒ M1</p>
                    <p class="mt-1">Autorulotele omologate ca <strong>autoturism (categoria M1)</strong> se impoziteazÄƒ identic cu autoturismele.</p>
                </div>

                <div id="vehiculSpecialInfo" class="hidden bg-purple-50 border border-purple-200 rounded-lg p-4 text-sm text-purple-800">
                    <p class="font-bold">ğŸš› Autovehicul special</p>
                    <p class="mt-1">Autovehiculele speciale sub 12 tone se Ã®ncadreazÄƒ la "Alte vehicule cu tracÈ›iune mecanicÄƒ".</p>
                </div>

                <!-- Additional rates info -->
                <div id="additionalRatesInfo" class="bg-orange-50 rounded-lg p-4 text-sm">
                    <p class="font-semibold text-orange-800 mb-2">ğŸ“‹ Cote adiÈ›ionale BraÈ™ov - Art. 7 (se aplicÄƒ tuturor!):</p>
                    <div class="grid grid-cols-2 md:grid-cols-5 gap-2 text-orange-700">
                        <div id="rate-noneuro" class="p-2 rounded text-center bg-white">
                            <p class="font-medium text-xs">Non-euro/E0-E3</p>
                            <p class="text-lg font-bold text-red-600">+100%</p>
                        </div>
                        <div id="rate-euro4" class="p-2 rounded text-center bg-white">
                            <p class="font-medium text-xs">Euro 4</p>
                            <p class="text-lg font-bold text-red-600">+100%</p>
                        </div>
                        <div id="rate-euro5" class="p-2 rounded text-center bg-orange-200 ring-2 ring-orange-400">
                            <p class="font-medium text-xs">Euro 5</p>
                            <p class="text-lg font-bold text-orange-600">+75%</p>
                        </div>
                        <div id="rate-euro6" class="p-2 rounded text-center bg-white">
                            <p class="font-medium text-xs">Euro 6</p>
                            <p class="text-lg font-bold text-yellow-600">+35%</p>
                        </div>
                        <div id="rate-hybrid" class="p-2 rounded text-center bg-white">
                            <p class="font-medium text-xs">Hibrid</p>
                            <p class="text-lg font-bold text-green-600">+5%</p>
                        </div>
                    </div>
                </div>

                <!-- Calculation details -->
                <div id="vehicleDetails" class="hidden bg-gray-50 rounded-lg p-4 text-sm">
                    <p class="font-semibold text-gray-800 mb-2">ğŸ“Š Detalii calcul:</p>
                    <div class="grid md:grid-cols-2 gap-2 text-gray-600">
                        <p>FracÈ›iuni de 200 cmÂ³: <strong id="vehicleUnits">0</strong></p>
                        <p>Tarif bazÄƒ/200cmÂ³: <strong id="vehicleBaseRate">0 lei</strong></p>
                        <p>Impozit bazÄƒ (naÈ›ional indexat): <strong id="vehicleBaseTax">0 RON</strong></p>
                        <p>CotÄƒ adiÈ›ionalÄƒ BraÈ™ov: <strong id="vehicleAdditionalTax">0 RON</strong></p>
                    </div>
                </div>

                <!-- Result -->
                <div id="vehicleResult" class="bg-gradient-to-r from-orange-500 to-red-500 rounded-xl p-6 text-white">
                    <div id="vehicleBreakdown" class="grid md:grid-cols-3 gap-4 mb-4 text-orange-100 text-sm">
                        <div>
                            <p>Impozit bazÄƒ:</p>
                            <p id="resultBaseTax" class="text-white font-semibold">0,00 RON</p>
                        </div>
                        <div>
                            <p>Majorare BraÈ™ov (<span id="resultAdditionalPercent">0</span>%):</p>
                            <p id="resultAdditionalTax" class="text-white font-semibold">0,00 RON</p>
                        </div>
                        <div>
                            <p>Subtotal:</p>
                            <p id="resultSubtotal" class="text-white font-semibold">0,00 RON</p>
                        </div>
                    </div>
                    <div id="trailerInfo" class="hidden mb-4 text-teal-100 text-sm">
                        <p>Tip: <strong class="text-white">RulotÄƒ tractatÄƒ (Art. 470 alin. 7)</strong></p>
                        <p>Impozit fix pe masÄƒ, fÄƒrÄƒ majorÄƒri de poluare</p>
                    </div>
                    <div class="border-t border-orange-300 pt-4">
                        <p class="text-orange-100 mb-1">Impozit anual vehicul:</p>
                        <p id="vehicleTax" class="text-4xl font-bold">0,00 RON</p>
                        <p id="vehicleDiscount" class="hidden text-orange-200 text-sm mt-2">âœ“ Include reducerea de 10% pentru platÄƒ anticipatÄƒ</p>
                    </div>
                </div>
            </div>

            <!-- TEREN TAB -->
            <div id="content-teren" class="hidden space-y-6">
                <h2 class="text-xl font-bold text-gray-800 flex items-center gap-2">
                    ğŸŒ Impozit pe Teren
                </h2>

                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Categoria de folosinÈ›Äƒ</label>
                        <select id="landCategory" onchange="calculateLand()" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            <optgroup label="Intravilan">
                                <option value="intravilan_constructii">Teren cu construcÈ›ii</option>
                                <option value="intravilan_arabil">Teren arabil</option>
                                <option value="intravilan_pasune">PÄƒÈ™une</option>
                                <option value="intravilan_faneata">FÃ¢neaÈ›Äƒ</option>
                                <option value="intravilan_vie">Vie</option>
                                <option value="intravilan_livada">LivadÄƒ</option>
                            </optgroup>
                            <optgroup label="Extravilan">
                                <option value="extravilan_arabil">Teren arabil</option>
                                <option value="extravilan_pasune">PÄƒÈ™une</option>
                                <option value="extravilan_faneata">FÃ¢neaÈ›Äƒ</option>
                            </optgroup>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Zona fiscalÄƒ</label>
                        <select id="landZone" onchange="calculateLand()" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            <option value="A">Zona A (centralÄƒ)</option>
                            <option value="B">Zona B</option>
                            <option value="C">Zona C</option>
                            <option value="D">Zona D (perifericÄƒ)</option>
                        </select>
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">SuprafaÈ›a terenului (mÂ²)</label>
                    <input type="number" id="landArea" oninput="calculateLand()" placeholder="Ex: 500" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                </div>

                <div class="bg-green-50 rounded-lg p-4 text-sm">
                    <p class="font-semibold text-green-800 mb-2">ğŸ“‹ InformaÈ›ii zonare (HCL 236/2015):</p>
                    <p class="text-green-700">VerificaÈ›i zona fiscalÄƒ a terenului la DirecÈ›ia FiscalÄƒ BraÈ™ov sau pe platforma brasovcity.</p>
                    <p id="landRateInfo" class="mt-2 text-green-800 hidden">Tarif aplicat: <strong id="landRateValue">0 lei/ha</strong></p>
                </div>

                <!-- Result -->
                <div class="bg-gradient-to-r from-green-500 to-teal-500 rounded-xl p-6 text-white">
                    <p class="text-green-100 mb-1">Impozit anual teren:</p>
                    <p id="landTax" class="text-4xl font-bold">0,00 RON</p>
                    <p id="landDiscount" class="hidden text-green-200 text-sm mt-2">âœ“ Include reducerea de 10% pentru platÄƒ anticipatÄƒ</p>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="mt-6 bg-white rounded-xl shadow-lg p-6">
            <h3 class="font-bold text-gray-800 mb-3">ğŸ“… Termene de platÄƒ 2026</h3>
            <div class="grid md:grid-cols-3 gap-4 text-sm text-gray-600">
                <div class="bg-green-50 p-3 rounded-lg">
                    <p class="font-medium text-green-800">ğŸ PlatÄƒ integralÄƒ cu bonificaÈ›ie:</p>
                    <p class="text-lg font-bold text-green-600">pÃ¢nÄƒ la 31 martie 2026</p>
                    <p class="text-xs">Beneficiezi de 10% reducere</p>
                </div>
                <div class="bg-gray-50 p-3 rounded-lg">
                    <p class="font-medium text-gray-800">Prima ratÄƒ:</p>
                    <p class="text-lg font-bold">31 martie 2026</p>
                </div>
                <div class="bg-gray-50 p-3 rounded-lg">
                    <p class="font-medium text-gray-800">A doua ratÄƒ:</p>
                    <p class="text-lg font-bold">30 septembrie 2026</p>
                </div>
            </div>
            <div class="mt-4 pt-4 border-t border-gray-200">
                <p class="text-xs text-gray-500">âš ï¸ Calculator orientativ bazat pe HCL 1142/2025. Pentru calcule oficiale consultaÈ›i:</p>
                <p class="text-xs text-gray-600 mt-1"><strong>DirecÈ›ia FiscalÄƒ BraÈ™ov</strong> - str. DorobanÈ›ilor nr. 4 | Tel: +40-268-405000 | Email: dirfiscala@dfbv.ro</p>
            </div>
            <p class="text-xs text-gray-400 mt-2">Sursa: HCL nr. 1142/22.12.2025 - Consiliul Local al Municipiului BraÈ™ov</p>
        </div>
    </div>

    <script>
        // Data
        const buildingValues = {
            beton: { withUtilities: 2677, withoutUtilities: 1606 },
            piatra: { withUtilities: 803, withoutUtilities: 535 },
            lemn: { withUtilities: 335, withoutUtilities: 201 }
        };

        const buildingTaxRates = {
            fizica: { residential: 0.001, nonResidential: 0.005 },
            juridica: { residential: 0.002, nonResidential: 0.013 }
        };

        const vehicleBaseTaxRates = {
            motociclete_sub1600: { noneuro: 19.5, euro4: 18.8, euro5: 17.6, euro6: 16.5, hybrid: 16.2 },
            motociclete_peste1600: { noneuro: 22.1, euro4: 21.3, euro5: 19.9, euro6: 18.7, hybrid: 18.4 },
            autoturism_sub1600: { noneuro: 19.5, euro4: 18.8, euro5: 17.6, euro6: 16.5, hybrid: 16.2 },
            autoturism_1601_2000: { noneuro: 29.7, euro4: 28.5, euro5: 26.7, euro6: 25.1, hybrid: 24.6 },
            autoturism_2001_2600: { noneuro: 92.2, euro4: 88.6, euro5: 82.8, euro6: 77.8, hybrid: 76.3 },
            autoturism_2601_3000: { noneuro: 182.9, euro4: 172.8, euro5: 154.1, euro6: 151.2, hybrid: 149.8 },
            autoturism_peste3000: { noneuro: 319.0, euro4: 297.3, euro5: 294.4, euro6: 290.0, hybrid: 275.5 },
            microbuze: { noneuro: 31.2, euro4: 30.0, euro5: 28.1, euro6: 26.4, hybrid: 25.9 },
            autoutilitare_sub12t: { noneuro: 39.0, euro4: 37.5, euro5: 35.1, euro6: 33.0, hybrid: 32.4 }
        };

        const trailerTaxRates = { sub1t: 14.16, '1t_5t': 53.51, '5t_10t': 81.83, peste10t: 100.73 };

        const additionalRates = { noneuro: 1.0, euro4: 1.0, euro5: 0.75, euro6: 0.35, hybrid: 0.05 };

        const landTaxRates = {
            intravilan_constructii: { A: 0.0060, B: 0.0054, C: 0.0054, D: 0.0036 },
            intravilan_arabil: { A: 0.0112, B: 0.0056, C: 0.0051, D: 0.0041 },
            intravilan_pasune: { A: 0.0054, B: 0.0051, C: 0.0051, D: 0.0036 },
            intravilan_faneata: { A: 0.0054, B: 0.0051, C: 0.0051, D: 0.0036 },
            intravilan_vie: { A: 0.0129, B: 0.0094, C: 0.0075, D: 0.0051 },
            intravilan_livada: { A: 0.0129, B: 0.0122, C: 0.0094, D: 0.0075 },
            extravilan_arabil: { A: 0.0075, B: 0.0056, C: 0.0051, D: 0.0041 },
            extravilan_pasune: { A: 0.0056, B: 0.0051, C: 0.0041, D: 0.0036 },
            extravilan_faneata: { A: 0.0056, B: 0.0051, C: 0.0041, D: 0.0036 }
        };

        // Utility functions
        function formatCurrency(value) {
            return new Intl.NumberFormat('ro-RO', { style: 'currency', currency: 'RON', minimumFractionDigits: 2 }).format(value);
        }

        function isEarlyPayment() {
            return document.getElementById('earlyPayment').checked;
        }

        // Tab management
        function showTab(tabName) {
            ['cladiri', 'auto', 'teren'].forEach(tab => {
                document.getElementById('content-' + tab).classList.add('hidden');
                document.getElementById('tab-' + tab).classList.remove('tab-active');
                document.getElementById('tab-' + tab).classList.add('tab-inactive');
            });
            document.getElementById('content-' + tabName).classList.remove('hidden');
            document.getElementById('tab-' + tabName).classList.add('tab-active');
            document.getElementById('tab-' + tabName).classList.remove('tab-inactive');
        }

        // Building calculation
        function calculateBuilding() {
            const area = parseFloat(document.getElementById('buildingArea').value) || 0;
            const material = document.getElementById('buildingMaterial').value;
            const hasUtilities = document.getElementById('hasUtilities').checked;
            const ownerType = document.getElementById('buildingOwnerType').value;
            const buildingType = document.getElementById('buildingType').value;

            const valuePerSqm = hasUtilities ? buildingValues[material].withUtilities : buildingValues[material].withoutUtilities;
            const baseValue = area * valuePerSqm;
            const rate = buildingTaxRates[ownerType][buildingType];
            let tax = baseValue * rate;

            if (isEarlyPayment()) tax *= 0.9;

            document.getElementById('buildingBaseValue').textContent = formatCurrency(baseValue);
            document.getElementById('buildingRate').textContent = (rate * 100).toFixed(1) + '%';
            document.getElementById('buildingTax').textContent = formatCurrency(tax);
            document.getElementById('buildingDiscount').classList.toggle('hidden', !isEarlyPayment() || tax === 0);
        }

        // Vehicle type change handler
        function onVehicleTypeChange() {
            const vehicleType = document.getElementById('vehicleType').value;
            const isTrailer = vehicleType === 'rulota_tractata';

            document.getElementById('engineSection').classList.toggle('hidden', isTrailer);
            document.getElementById('trailerSection').classList.toggle('hidden', !isTrailer);
            document.getElementById('pollutionWarning').classList.toggle('hidden', isTrailer);
            document.getElementById('additionalRatesInfo').classList.toggle('hidden', isTrailer);
            document.getElementById('vehicleDetails').classList.toggle('hidden', isTrailer);

            document.getElementById('autorulotaInfo').classList.toggle('hidden', vehicleType !== 'autorulota_m1');
            document.getElementById('vehiculSpecialInfo').classList.toggle('hidden', vehicleType !== 'vehicul_special');

            // Update result box colors
            const resultBox = document.getElementById('vehicleResult');
            if (isTrailer) {
                resultBox.className = 'bg-gradient-to-r from-teal-500 to-green-500 rounded-xl p-6 text-white';
                document.getElementById('vehicleBreakdown').classList.add('hidden');
                document.getElementById('trailerInfo').classList.remove('hidden');
            } else {
                resultBox.className = 'bg-gradient-to-r from-orange-500 to-red-500 rounded-xl p-6 text-white';
                document.getElementById('vehicleBreakdown').classList.remove('hidden');
                document.getElementById('trailerInfo').classList.add('hidden');
            }

            calculateVehicle();
        }

        // Vehicle calculation
        function calculateVehicle() {
            const vehicleType = document.getElementById('vehicleType').value;
            const isTrailer = vehicleType === 'rulota_tractata';

            if (isTrailer) {
                const mass = document.getElementById('trailerMass').value;
                let tax = trailerTaxRates[mass];
                if (isEarlyPayment()) tax *= 0.9;
                document.getElementById('vehicleTax').textContent = formatCurrency(tax);
                document.getElementById('vehicleDiscount').classList.toggle('hidden', !isEarlyPayment() || tax === 0);
                return;
            }

            const capacity = parseFloat(document.getElementById('engineCapacity').value) || 0;
            const pollutionNorm = document.getElementById('pollutionNorm').value;

            // Update highlighted rate
            ['noneuro', 'euro4', 'euro5', 'euro6', 'hybrid'].forEach(norm => {
                const el = document.getElementById('rate-' + norm);
                if (norm === pollutionNorm) {
                    el.classList.add('bg-orange-200', 'ring-2', 'ring-orange-400');
                    el.classList.remove('bg-white');
                } else {
                    el.classList.remove('bg-orange-200', 'ring-2', 'ring-orange-400');
                    el.classList.add('bg-white');
                }
            });

            if (capacity === 0) {
                document.getElementById('vehicleTax').textContent = formatCurrency(0);
                document.getElementById('vehicleDetails').classList.add('hidden');
                return;
            }

            // Get vehicle category
            let category;
            if (vehicleType === 'motocicleta') {
                category = capacity <= 1600 ? 'motociclete_sub1600' : 'motociclete_peste1600';
            } else if (vehicleType === 'autoturism' || vehicleType === 'autorulota_m1') {
                if (capacity <= 1600) category = 'autoturism_sub1600';
                else if (capacity <= 2000) category = 'autoturism_1601_2000';
                else if (capacity <= 2600) category = 'autoturism_2001_2600';
                else if (capacity <= 3000) category = 'autoturism_2601_3000';
                else category = 'autoturism_peste3000';
            } else if (vehicleType === 'microbuz') {
                category = 'microbuze';
            } else {
                category = 'autoutilitare_sub12t';
            }

            const baseRate = vehicleBaseTaxRates[category][pollutionNorm];
            const units = Math.ceil(capacity / 200);
            const baseTax = baseRate * units;
            const additionalRate = additionalRates[pollutionNorm];
            const additionalTax = baseTax * additionalRate;
            let totalTax = baseTax + additionalTax;

            if (isEarlyPayment()) totalTax *= 0.9;

            // Update UI
            document.getElementById('vehicleDetails').classList.remove('hidden');
            document.getElementById('vehicleUnits').textContent = units;
            document.getElementById('vehicleBaseRate').textContent = baseRate.toFixed(2) + ' lei';
            document.getElementById('vehicleBaseTax').textContent = formatCurrency(baseTax);
            document.getElementById('vehicleAdditionalTax').textContent = '+' + formatCurrency(additionalTax);

            document.getElementById('resultBaseTax').textContent = formatCurrency(baseTax);
            document.getElementById('resultAdditionalPercent').textContent = (additionalRate * 100).toFixed(0);
            document.getElementById('resultAdditionalTax').textContent = formatCurrency(additionalTax);
            document.getElementById('resultSubtotal').textContent = formatCurrency(baseTax + additionalTax);
            document.getElementById('vehicleTax').textContent = formatCurrency(totalTax);
            document.getElementById('vehicleDiscount').classList.toggle('hidden', !isEarlyPayment() || totalTax === 0);
        }

        // Land calculation
        function calculateLand() {
            const area = parseFloat(document.getElementById('landArea').value) || 0;
            const category = document.getElementById('landCategory').value;
            const zone = document.getElementById('landZone').value;

            const ratePerSqm = landTaxRates[category]?.[zone] || 0;
            let tax = area * ratePerSqm;

            if (isEarlyPayment()) tax *= 0.9;

            document.getElementById('landTax').textContent = formatCurrency(tax);
            document.getElementById('landDiscount').classList.toggle('hidden', !isEarlyPayment() || tax === 0);

            if (area > 0) {
                document.getElementById('landRateInfo').classList.remove('hidden');
                document.getElementById('landRateValue').textContent = (ratePerSqm * 10000).toFixed(0) + ' lei/ha';
            } else {
                document.getElementById('landRateInfo').classList.add('hidden');
            }
        }

        // Early payment toggle handler
        document.getElementById('earlyPayment').addEventListener('change', function() {
            document.getElementById('discountBadge').classList.toggle('hidden', !this.checked);
            calculateBuilding();
            calculateVehicle();
            calculateLand();
        });

        // Initialize
        calculateBuilding();
        calculateVehicle();
        calculateLand();
    </script>
</body>
</html>
